<html>
<head>
    <link rel="stylesheet" href="style/style.css">
    <script src="jquery-3.5.1.min.js"></script>
    <script type="text/javascript">
       var getUrlParameter = function getUrlParameter(sParam) {
            var sPageURL = window.location.search.substring(1),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return typeof sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
                }
            }
            return false;
        };
        
        $(document).ready(function () {
            //let searchParams = new URLSearchParams(window.location.search);
            //var param = searchParams.get('id');
            //var param = getUrlParameter('id');
                
            
            //$('#findChannel').click(function () {
                var resultElement = $('#palinsesto'); //div dove iniettare html
               
                resultElement.html('');
                var channelId = getUrlParameter('id');
                console.log(URL);
                var programId = 1;
                //var requestData = $('#channel').val(); //getto quello che scrivo
                $.ajax({
                    url: 'http://localhost:8080/Guida-TVREST/rest/channels/'+channelId+'/schedule', //URL API 
                    method: 'get',
                    //data: { channel: requestData },
                    dataType: 'json',
                    success: function (response) {

                                        resultElement.html('Palinsesto del giorno '+ response[0].schedule.date +" - "+ response[0].schedule.channel);  
                                        response.forEach(function (element, i){

                                        var div = `<div><br><a id="program" href="http://localhost:8080/Guida-TVREST/single-program.html?URL=${element.URL}">${element.schedule.program} </a> in onda dalle ${element.schedule.from} alle ${element.schedule.to}<br></div>`; 
                                        $("#palinsesto").append(div);

                                    });

                                    },
                    error: function (err) {
                        alert(err);
                    }
                });
            //});
        });
        
        
    </script>
</head>
<body style="font-family:Arial">
    
    <br /><br />
    <div id="palinsesto">
       
    </div>
</body>
</html>