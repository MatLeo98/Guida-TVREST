<html>
<head>
    <link rel="stylesheet" href="style/style.css">
    <script src="jquery-3.5.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            //$('#findChannel').click(function () {
                var resultElement = $('#canali'); //div dove iniettare html
               
                resultElement.html('');

                //var requestData = $('#channel').val(); //getto quello che scrivo
                $.ajax({
                    url: 'http://localhost:8080/Guida-TVREST/rest/channels', //URL API 
                    method: 'get',
                    //data: { channel: requestData },
                    dataType: 'json',
                    success: function (response) {
                         
                           // resultElement.html('Palinsesto del giorno '+ response[0].schedule.date +" - "+ response[0].schedule.channel);  
                            response.forEach(function (element, i){
                                
                                var div = `<div class="singolo_canale"><a href="http://localhost:8080/Guida-TVREST/single-channel.html?id=${element.number}">${element.name}</a></div>`; 
                                //var div = `<div class="singolo_canale"><button id="channel" name="channel" value="${element.number}">${element.name}</button><div id="palinsesto"></div></div>`; 
                                $("#canali").append(div);
                                
                                /*$.ajax({
                                    url: 'http://localhost:8080/Guida-TVREST/rest/channels/'+${element.number}+'/schedule',
                                    success: function (response) {

                                        resultElement.html('Palinsesto del giorno '+ response[0].schedule.date +" - "+ response[0].schedule.channel);  
                                        response.forEach(function (element, i){

                                        var div = `<div class="singolo_canale">${element.schedule.program} in onda dalle ${element.schedule.from}</div>`; 
                                        $("#canali").append(div);

                                    });

                                    },
                                        error: function (request, status, error){
                                            console.log(status);
                                        },
                                        dataType: "json",
                                        type: "GET"
                                    });*/
                                
                            });
                            
                            
                           /*$(".singolo_canale").each(function (){
                            //var canale = this;
                            var requestData = $('#channel').val();
                            var resultElement = $('#palinsesto');
                            resultElement.html('');
                            $('#channel').click(function () {
                            //$(this).on("click", function (){
                                //var canale = this;
                                //$(this).on("click", function (){
                                    $.ajax({
                                    url: 'http://localhost:8080/Guida-TVREST/rest/channels/'+requestData+'/schedule',
                                    success: function (response) {

                                        resultElement.html('Palinsesto del giorno '+ response[0].schedule.date +" - "+ response[0].schedule.channel);  
                                        response.forEach(function (element, i){

                                        var div = `<div><a id="program" href="http://localhost:8080/Guida-TVREST/single-program.html?URL=${element.URL}">${element.schedule.program} </a> in onda dalle ${element.schedule.from}</div>`; 
                                        $("#palinsesto").append(div);

                                    });

                                    },
                                        error: function (request, status, error){
                                            console.log(status);
                                        },
                                        dataType: "json",
                                        type: "GET"
                                    });
                                })
                           // })
                        })
                        
                        /*$('#program').click(function () {
                            window.location = 'http://localhost:8080/Guida-TVREST/single-program.html' + somval;
                        });*/
                    
                            
                            
                            
                        
                    },
                    error: function (err) {
                        alert(err);
                    }
                });
            //});
        });
    </script>
</head>
<body style="font-family:Arial">
        
    
    
    <br /><br />
    <div id="canali">
       
    </div>
</body>
</html>